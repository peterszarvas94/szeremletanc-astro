---
import { getPosts } from "../api/posts";
import type { Node } from "../types/Node";
import NodeNavbar from "./node/NodeNavbar.astro";

interface Props {
  node: Node;
}

const { node }: Props = Astro.props;

const posts = await getPosts();
---

<section>
  <NodeNavbar node={node}/>
  <h1>{node?.title?.rendered}</h1>
  {
    posts.map((post) => (
      <article>
        <h1>
          <a href={`/${post.slug}`}>{post.title.rendered}</a>
        </h1>
        <div class="content" set:html={post.content.rendered} />
      </article>
    ))
  }
</section>
